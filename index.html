<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>مجلة ذيب</title>
  <style>
    body { font-family: Arial, sans-serif; background: #fffaf5; margin: 0; padding: 0; }
    header { background: #ffa726; padding: 20px; text-align: center; color: white; }
    header h1 { margin: 0; font-size: 2.5em; }

    .section { padding: 20px; }
    .section h2 { color: #e65100; margin-bottom: 10px; }

    .presenter { background: #fff3e0; padding: 15px; border-radius: 15px; margin-bottom: 15px; display: flex; align-items: center; box-shadow: 0 0 10px #ccc; }
    .presenter img { width: 100px; height: 100px; border-radius: 50%; object-fit: cover; margin-left: 15px; }
    .info { flex: 1; }
    .info h3 { margin: 0; }
    .info p { margin: 5px 0; }
    .like-btn { background: #ff5722; color: white; padding: 5px 10px; border: none; border-radius: 10px; cursor: pointer; margin-top: 5px; }

    .talents { display: flex; justify-content: space-around; gap: 10px; margin-top: 15px; }
    .talent { text-align: center; }
    .talent img { width: 100px; height: 100px; border-radius: 15px; }

    table { width: 100%; border-collapse: collapse; margin-top: 10px; background: white; box-shadow: 0 0 5px #ccc; }
    th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }

    .countdown { font-size: 1.5em; margin-top: 15px; color: #d84315; }

    .popup {
      position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
      background: #ffcc80; padding: 15px 25px; border-radius: 10px; box-shadow: 0 0 10px #00000030;
      display: none; z-index: 999;
    }

    @media(max-width: 600px) {
      .presenter { flex-direction: column; align-items: start; }
      .talents { flex-direction: column; align-items: center; }
    }
  </style>
</head>
<body>

<header>
  <h1>📖 مجلة ذيب</h1>
</header>

<div class="main-image" style="height: 200px; background: #ffe0b2; text-align: center; padding: 50px; font-size: 1.5em;">مساحة لصورة غلاف المجلة</div>

<div class="section">
  <h2>🎙️ أفضل 4 مذيعين</h2>
  <div class="presenter" id="khaled">
    <img src="https://via.placeholder.com/100" alt="Khaled">
    <div class="info">
      <h3>خالد</h3>
      <p>ID: likee.com/khaled</p>
      <p>💬 يقدم: مواهب الغناء</p>
      <p>💡 شخص محبوب ومتفاعل دائمًا</p>
      <button class="like-btn" onclick="like('khaled')">إعجاب ❤️ <span id="like-khaled">0</span></button><br>
      <a href="https://likee.video/khaled" target="_blank">صفحة المذيع</a>
    </div>
  </div>

  <div class="presenter" id="nora">
    <img src="https://via.placeholder.com/100" alt="Nora">
    <div class="info">
      <h3>نورا</h3>
      <p>ID: likee.com/nora</p>
      <p>💬 تقدم: الفقرات الاجتماعية</p>
      <p>🌟 أسلوب مميز وكاريزما رائعة</p>
      <button class="like-btn" onclick="like('nora')">إعجاب ❤️ <span id="like-nora">0</span></button><br>
      <a href="https://likee.video/nora" target="_blank">صفحة المذيع</a>
    </div>
  </div>

  <div class="presenter" id="aziz">
    <img src="https://via.placeholder.com/100" alt="Aziz">
    <div class="info">
      <h3>عزيز</h3>
      <p>ID: likee.com/aziz</p>
      <p>💬 يقدم: الألعاب والتحديات</p>
      <p>🔥 دائم التفاعل ويحب المرح</p>
      <button class="like-btn" onclick="like('aziz')">إعجاب ❤️ <span id="like-aziz">0</span></button><br>
      <a href="https://likee.video/aziz" target="_blank">صفحة المذيع</a>
    </div>
  </div>

  <div class="presenter" id="aya">
    <img src="https://via.placeholder.com/100" alt="Aya">
    <div class="info">
      <h3>آية</h3>
      <p>ID: likee.com/aya</p>
      <p>💬 تقدم: قصص ومعلومات ثقافية</p>
      <p>📚 مثقفة وأسلوبها جذاب</p>
      <button class="like-btn" onclick="like('aya')">إعجاب ❤️ <span id="like-aya">0</span></button><br>
      <a href="https://likee.video/aya" target="_blank">صفحة المذيع</a>
    </div>
  </div>
</div>

<div class="section">
  <h2>🌟 أفضل المواهب</h2>
  <div class="talents">
    <div class="talent">
      <img src="https://via.placeholder.com/100" alt="طبخ">
      <p>ديجا - موهبة: الطبخ</p>
    </div>
    <div class="talent">
      <img src="https://via.placeholder.com/100" alt="رسم">
      <p>رودي - موهبة: الرسم</p>
    </div>
    <div class="talent">
      <img src="https://via.placeholder.com/100" alt="أشغال يدوية">
      <p>الشيخه - موهبة: الأشغال اليدوية</p>
    </div>
  </div>
</div>

<div class="section">
  <h2>📅 جدول فقرات لايكى كورنر</h2>
  <table>
    <tr><th>الوقت</th><th>الفقرة</th><th>المقدم</th></tr>
    <tr><td>07:00م</td><td>فقرة 1</td><td>Deja💋ᵀᴴᴱᴱᴮ</td></tr>
    <tr><td>08:00م</td><td>فقرة 2</td><td>Rody ᵀᴴᴱᴱᴮ</td></tr>
    <tr><td>09:00م</td><td>فقرة 3</td><td>أنا💅الشيخهᵀʰᵉᵉᵇ</td></tr>
    <tr><td>10:00م</td><td>فقرة 4</td><td>الشـيـخ ابـوعدى</td></tr>
  </table>
</div>

<div class="section">
  <h2>❓ سؤال العدد</h2>
  <p>ما اسم الفقرة التي يقدمها خالد؟</p>
  <form id="answerForm">
    <input type="text" id="answer" placeholder="اكتب الإجابة هنا" required><br><br>
    <input type="text" id="userId" placeholder="أدخل Likee ID الخاص بك" required><br><br>
    <button type="submit">إرسال الإجابة</button>
  </form>
  <p>🎁 الجوائز: هدايا قيمة تصل حتى 10000 فاصوليا</p>
  <p>⚠️ الشروط: صاحب أول إجابة صحيحة يحصل على المكافأة</p>
  <div class="countdown" id="countdown">الوقت المتبقي: ...</div>
</div>

<div class="section">
  <h2>🔘 صوت لأفضل فقرة</h2>
  <form id="voteForm">
    <select id="bestSegment">
      <option value="فقرة 1">فقرة 1</option>
      <option value="فقرة 2">فقرة 2</option>
      <option value="فقرة 3">فقرة 3</option>
      <option value="فقرة 4">فقرة 4</option>
    </select>
    <button type="submit">تصويت</button>
  </form>
</div>

<div class="popup" id="popup">مرحبًا بك في مجلة الذيب 📰</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getDatabase, ref, set, get, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAxzeJBrb4NjJgA6qxI7FzZBwaksiLvkVI",
    authDomain: "theeb-monthly.firebaseapp.com",
    databaseURL: "https://theeb-monthly-default-rtdb.firebaseio.com",
    projectId: "theeb-monthly",
    storageBucket: "theeb-monthly.appspot.com",
    messagingSenderId: "65722929609",
    appId: "1:65722929609:web:d4e2de7457612372ce1818"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const ids = ["khaled", "nora", "aziz", "aya"];
  ids.forEach(id => {
    const likeRef = ref(db, 'likes/' + id);
    onValue(likeRef, snap => {
      document.getElementById('like-' + id).innerText = snap.exists() ? snap.val() : 0;
    });
  });

  window.like = function(id) {
    const likeRef = ref(db, 'likes/' + id);
    get(likeRef).then(snap => {
      const val = snap.exists() ? snap.val() : 0;
      set(likeRef, val + 1);
    });
  };

  document.getElementById("answerForm").addEventListener("submit", function(e) {
    e.preventDefault();
    const ans = document.getElementById("answer").value;
    const user = document.getElementById("userId").value;
    if (!user) return;
    set(ref(db, 'answers/' + user), ans);
    alert("تم إرسال الإجابة بنجاح!");
  });

  document.getElementById("voteForm").addEventListener("submit", function(e) {
    e.preventDefault();
    const vote = document.getElementById("bestSegment").value;
    set(ref(db, 'votes/' + vote), vote);
    alert("شكراً لتصويتك!");
  });

  function countdown48Hours() {
    const now = new Date().getTime();
    const target = now + 48 * 60 * 60 * 1000;
    const countdownEl = document.getElementById("countdown");

    const update = () => {
      const current = new Date().getTime();
      const diff = target - current;
      if (diff <= 0) {
        countdownEl.innerText = "انتهى الوقت!";
        return;
      }
      const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
      const m = Math.floor((diff / (1000 * 60)) % 60);
      const s = Math.floor((diff / 1000) % 60);
      countdownEl.innerText = `الوقت المتبقي: ${h}س ${m}د ${s}ث`;
    };

    setInterval(update, 1000);
    update();
  }

  window.onload = function() {
    document.getElementById("popup").style.display = "block";
    setTimeout(() => {
      document.getElementById("popup").style.display = "none";
    }, 5000);
    countdown48Hours();
  };
</script>

</body>
</html>
