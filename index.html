<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>مجلة ذيب</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #f4f4f4;
      margin: 0; padding: 0;
      direction: rtl;
      text-align: center;
    }
    header {
      background-color: #262c49;
      color: white;
      padding: 20px;
    }
    .banner {
      height: 200px;
      background: #ddd;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .slider {
      display: flex;
      overflow-x: auto;
      gap: 20px;
      padding: 20px;
    }
    .card {
      flex: 0 0 300px;
      background-color: white;
      border-radius: 15px;
      box-shadow: 0 0 10px #aaa;
      padding: 15px;
      position: relative;
    }
    .card img {
      width: 100%;
      border-radius: 10px;
    }
    .card .like {
      color: red;
      cursor: pointer;
    }
    .like-count {
      font-weight: bold;
      margin-top: 5px;
    }
    .section {
      padding: 20px;
      margin: 20px auto;
      max-width: 800px;
      background: white;
      border-radius: 10px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 10px;
      border: 1px solid #ccc;
    }
    input, button {
      padding: 10px;
      margin: 10px 0;
      width: 80%;
    }
    .popup {
      position: fixed;
      bottom: 10px;
      right: 10px;
      background: #ffdb5b;
      padding: 15px;
      border-radius: 8px;
      animation: fadeOut 5s forwards;
    }
    @keyframes fadeOut {
      0% { opacity: 1; }
      80% { opacity: 1; }
      100% { opacity: 0; display: none; }
    }
    @media(max-width: 600px){
      .card { flex: 0 0 90%; }
    }
  </style>
</head>
<body>
  <header>
    <h1>📖 مجلة ذيب</h1>
  </header>

  <div class="banner">مساحة مخصصة للصورة الرئيسية</div>

  <!-- قسم أفضل المذيعين -->
  <div class="slider">
    <div class="card">
      <img src="https://via.placeholder.com/300x200" alt="Khaled">
      <p>خالد</p>
      <p>ID: khaled123</p>
      <button onclick="window.open('https://likee.video/khaled', '_blank')">📲 صفحة المذيع</button>
      <span class="like" onclick="like('khaled')">❤️</span>
      <div id="like-khaled" class="like-count">0</div>
      <p>مقدم فقرة ألعاب وتحديات!</p>
    </div>

    <div class="card">
      <img src="https://via.placeholder.com/300x200" alt="Nora">
      <p>نورا</p>
      <p>ID: nora321</p>
      <button onclick="window.open('https://likee.video/nora', '_blank')">📲 صفحة المذيع</button>
      <span class="like" onclick="like('nora')">❤️</span>
      <div id="like-nora" class="like-count">0</div>
      <p>مقدمة فقرة ترفيه ومواهب!</p>
    </div>

    <div class="card">
      <img src="https://via.placeholder.com/300x200" alt="Aziz">
      <p>عزيز</p>
      <p>ID: aziz700</p>
      <button onclick="window.open('https://likee.video/aziz', '_blank')">📲 صفحة المذيع</button>
      <span class="like" onclick="like('aziz')">❤️</span>
      <div id="like-aziz" class="like-count">0</div>
      <p>مقدم فقرة مواهب ورسم!</p>
    </div>

    <div class="card">
      <img src="https://via.placeholder.com/300x200" alt="Sara">
      <p>سارة</p>
      <p>ID: sara678</p>
      <button onclick="window.open('https://likee.video/sara', '_blank')">📲 صفحة المذيع</button>
      <span class="like" onclick="like('sara')">❤️</span>
      <div id="like-sara" class="like-count">0</div>
      <p>مقدمة فقرة ثقافية ممتعة!</p>
    </div>
  </div>

  <!-- قسم ترحيب المذيعين الجدد -->
  <div class="section">
    <h2>🎉 ترحيب بالمذيعين الجدد</h2>
    <marquee behavior="scroll" direction="right">
      <strong>زينه ᵀʰᵉᵉᵇ - ID: F1672016</strong> | 
      <strong>Roaaᵀʰᵉᵉᵇ - ID: roaa274182</strong> | 
      <strong>Yasmin ᵀʰᵉᵉᵇ - ID: 1097073180</strong>
    </marquee>
  </div>

  <!-- قسم المواهب -->
  <div class="section">
    <h2>🌟 أفضل المواهب</h2>
    <div class="slider">
      <div class="card">
        <img src="https://via.placeholder.com/300x200" alt="موهبة">
        <p>رسم - خالد</p>
        <p>ID: khaled123</p>
      </div>
      <div class="card">
        <img src="https://via.placeholder.com/300x200" alt="موهبة">
        <p>طبخ - نورا</p>
        <p>ID: nora321</p>
      </div>
      <div class="card">
        <img src="https://via.placeholder.com/300x200" alt="موهبة">
        <p>أعمال يدوية - سارة</p>
        <p>ID: sara678</p>
      </div>
    </div>
  </div>

  <!-- جدول الفقرات -->
  <div class="section">
    <h2>📅 جدول فقرات لايكى كورنر</h2>
    <table>
      <tr>
        <th>الوقت</th>
        <th>الفقرة</th>
        <th>المقدم</th>
      </tr>
      <tr>
        <td>07:00 م</td><td>الفقرة الأولى</td><td>Deja💋ᵀᴴᴱᴱᴮ</td>
      </tr>
      <tr>
        <td>08:00 م</td><td>الفقرة الثانية</td><td>Rody ᵀᴴᴱᴱᴮ</td>
      </tr>
      <tr>
        <td>09:00 م</td><td>الفقرة الثالثة</td><td>أنا💅الشيخهᵀʰᵉᵉᵇ</td>
      </tr>
      <tr>
        <td>10:00 م</td><td>الفقرة الرابعة</td><td>الشـيـخ ابـوعدى</td>
      </tr>
    </table>
  </div>

  <!-- سؤال العدد -->
  <div class="section">
    <h2>❓ سؤال العدد</h2>
    <p>من هو أول مذيع انضم للمجلة؟</p>
    <form onsubmit="submitAnswer(event)">
      <input type="text" id="likeeId" placeholder="أدخل Likee ID الخاص بك" required><br>
      <input type="text" id="answer" placeholder="اكتب إجابتك هنا" required><br>
      <button type="submit">إرسال الإجابة</button>
    </form>
    <div id="countdown">⏳ الوقت المتبقي: --:--:--</div>
  </div>

  <!-- التصويت -->
  <div class="section">
    <h2>🗳️ صوت لأفضل فقرة</h2>
    <button onclick="vote('فقرة الألعاب')">فقرة الألعاب</button>
    <button onclick="vote('فقرة الرسم')">فقرة الرسم</button>
    <button onclick="vote('فقرة الطبخ')">فقرة الطبخ</button>
    <div id="vote-result"></div>
  </div>

  <!-- الرسالة المنبثقة -->
  <div class="popup" id="popupMsg">👋 مرحبًا بك في مجلة ذيب!</div>

  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getDatabase, ref, onValue, set, get } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAxzeJBrb4NjJgA6qxI7FzZBwaksiLvkVI",
      authDomain: "theeb-monthly.firebaseapp.com",
      databaseURL: "https://theeb-monthly-default-rtdb.firebaseio.com",
      projectId: "theeb-monthly",
      storageBucket: "theeb-monthly.appspot.com",
      messagingSenderId: "65722929609",
      appId: "1:65722929609:web:d4e2de7457612372ce1818"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    window.like = function(id) {
      const refLikes = ref(db, 'likes/' + id);
      get(refLikes).then(snapshot => {
        const val = snapshot.exists() ? snapshot.val() : 0;
        set(refLikes, val + 1);
      });
    }

    ['khaled','nora','aziz','sara'].forEach(id => {
      const el = document.getElementById('like-' + id);
      const refLikes = ref(db, 'likes/' + id);
      onValue(refLikes, snap => {
        if (el) el.innerText = snap.exists() ? snap.val() : 0;
      });
    });

    window.submitAnswer = function(event) {
      event.preventDefault();
      const likeeId = document.getElementById('likeeId').value;
      const answer = document.getElementById('answer').value;
      if (!likeeId || !answer) return;
      set(ref(db, 'answers/' + likeeId), answer);
      alert("✅ تم إرسال إجابتك بنجاح!");
    }

    window.vote = function(name) {
      const refVote = ref(db, 'votes/' + name);
      get(refVote).then(snap => {
        const val = snap.exists() ? snap.val() : 0;
        set(refVote, val + 1);
      });
    }

    // العداد التنازلي 48 ساعة
    const startTime = Date.now();
    const deadline = startTime + 48 * 60 * 60 * 1000;

    const interval = setInterval(() => {
      const now = Date.now();
      const diff = deadline - now;
      if (diff <= 0) {
        document.getElementById("countdown").innerText = "⏳ انتهى الوقت!";
        clearInterval(interval);
        return;
      }
      const h = Math.floor(diff / 1000 / 60 / 60);
      const m = Math.floor((diff / 1000 / 60) % 60);
      const s = Math.floor((diff / 1000) % 60);
      document.getElementById("countdown").innerText = `⏳ الوقت المتبقي: ${h}:${m}:${s}`;
    }, 1000);
  </script>
</body>
</html>
