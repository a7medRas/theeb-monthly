<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>مجلة ذيب</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@500&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
      direction: rtl;
      text-align: center;
    }
    h1 { background: #222; color: #fff; padding: 20px 0; margin: 0; }
    .section { padding: 20px; margin-top: 20px; }
    .slider { display: flex; overflow-x: auto; gap: 15px; padding: 10px; scroll-snap-type: x mandatory; }
    .card {
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      min-width: 300px;
      flex-shrink: 0;
      scroll-snap-align: start;
      padding: 15px;
      text-align: center;
    }
    .card img { border-radius: 15px; width: 100%; max-height: 250px; object-fit: cover; }
    .like-btn {
      background-color: #ff4081;
      color: white;
      border: none;
      padding: 5px 15px;
      border-radius: 20px;
      margin: 10px 0;
      cursor: pointer;
    }
    .talent-container { display: flex; justify-content: center; flex-wrap: wrap; gap: 15px; }
    .talent {
      width: 30%;
      background: white;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    table {
      width: 90%;
      margin: 20px auto;
      border-collapse: collapse;
      background: white;
    }
    table, th, td {
      border: 1px solid #ccc;
    }
    th, td {
      padding: 10px;
    }
    .popup {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #ffc107;
      color: black;
      padding: 15px 25px;
      border-radius: 10px;
      z-index: 999;
      display: none;
    }
    @media (max-width: 768px) {
      .talent { width: 100%; }
    }
  </style>
</head>
<body>

<!-- رسالة ترحيبية -->
<div class="popup" id="popup">👋 مرحبًا بك في مجلة ذيب الشهرية!</div>

<h1>📖 مجلة ذيب</h1>

<!-- أفضل 4 مذيعين -->
<div class="section">
  <h2>⭐ أفضل 4 مذيعين</h2>
  <div class="slider">
    <!-- مذيع 1 -->
    <div class="card">
      <img src="https://i.postimg.cc/m24YjW7p/Whats-App-Image-2025-06-13-at-10-34-43-PM.jpg" alt="ابوعدى">
      <h3>الشـيـخ ابـوعدى</h3>
      <p>ID: 560282169</p>
      <a href="https://l.likee.video/p/UHcsm8" class="like-btn" target="_blank">صفحة المذيع</a>
      <button class="like-btn" onclick="like('abuadi')">👍 إعجاب</button>
      <div id="like-abuadi">0</div>
      <p>⭐ افضل مذيع لشهر مايو S1+</p>
    </div>

    <!-- مذيع 2 -->
    <div class="card">
      <img src="https://i.postimg.cc/m24YjW7p/Whats-App-Image-2025-06-13-at-10-34-43-PM.jpg" alt="الشيخه">
      <h3>أنا💅الشيخهᵀʰᵉᵉᵇ</h3>
      <p>ID: 58opp</p>
      <a href="https://l.likee.video/p/RZb0pf" class="like-btn" target="_blank">صفحة المذيع</a>
      <button class="like-btn" onclick="like('sheikha')">👍 إعجاب</button>
      <div id="like-sheikha">0</div>
      <p>⭐ افضل مذيع لشهر مايو S2</p>
    </div>

    <!-- مذيع 3 -->
    <div class="card">
      <img src="https://i.postimg.cc/2jhdnSLB/Whats-App-Image-2025-06-13-at-10-36-09-PM.jpg" alt="بكار">
      <h3>بكار الاهلاوي🌶</h3>
      <p>ID: 065yuttiy</p>
      <a href="https://l.likee.video/p/X3ouhP" class="like-btn" target="_blank">صفحة المذيع</a>
      <button class="like-btn" onclick="like('bakar')">👍 إعجاب</button>
      <div id="like-bakar">0</div>
      <p>⭐ افضل مذيع لشهر مايو S3</p>
    </div>

    <!-- مذيع 4 -->
    <div class="card">
      <img src="https://i.postimg.cc/NF61tdvx/Whats-App-Image-2025-06-13-at-10-38-36-PM.jpg" alt="جاسمن">
      <h3>☕جاسمن🤍ᵀʰᵉᵉᵇ</h3>
      <p>ID: Gogo100100</p>
      <a href="https://l.likee.video/p/ZRoECu" class="like-btn" target="_blank">صفحة المذيع</a>
      <button class="like-btn" onclick="like('jasmin')">👍 إعجاب</button>
      <div id="like-jasmin">0</div>
      <p>⭐ افضل مذيع لشهر مايو S4</p>
    </div>
  </div>
</div>

<!-- قسم الترحيب بالمذيعين الجدد -->
<div class="section">
  <h2>👋 ترحيب بالمذيعين الجدد</h2>
  <marquee direction="right" behavior="scroll" scrollamount="6">
    🎉 أهلاً بـ زينه ᵀʰᵉᵉᵇ (ID: F1672016) — Roaaᵀʰᵉᵉᵇ (ID: roaa274182) — Yasmin ᵀʰᵉᵉᵇ (ID: 1097073180)
  </marquee>
</div>

<!-- قسم المواهب -->
<div class="section">
  <h2>🎨 أفضل المواهب</h2>
  <div class="talent-container">
    <div class="talent"><strong>زينب</strong><br>موهبة: طبخ</div>
    <div class="talent"><strong>هدى</strong><br>موهبة: رسم</div>
    <div class="talent"><strong>نجلاء</strong><br>موهبة: أعمال يدوية</div>
  </div>
</div>

<!-- جدول الفقرات -->
<div class="section">
  <h2>📅 جدول فقرات لايكى كورنر</h2>
  <table>
    <tr><th>الوقت</th><th>الفقرة</th><th>المقدم</th></tr>
    <tr><td>07:00م</td><td>الأولى</td><td>Deja💋ᵀᴴᴱᴱᴮ</td></tr>
    <tr><td>08:00م</td><td>الثانية</td><td>Rody ᵀᴴᴱᴱᴮ</td></tr>
    <tr><td>09:00م</td><td>الثالثة</td><td>أنا💅الشيخهᵀʰᵉᵉᵇ</td></tr>
    <tr><td>10:00م</td><td>الرابعة</td><td>الشـيـخ ابـوعدى</td></tr>
  </table>
</div>

<!-- سؤال العدد -->
<div class="section">
  <h2>❓ سؤال العدد</h2>
  <p>ما اسم الموهبة التي ظهرت في الفقرة الثالثة؟</p>
  <input type="text" id="answer" placeholder="الإجابة هنا" />
  <input type="text" id="likeeId" placeholder="معرّف Likee الخاص بك" />
  <button onclick="submitAnswer()" class="like-btn">إرسال</button>
</div>

<!-- الجوائز والشروط -->
<div class="section">
  <h3>🎁 الجوائز</h3>
  <p>هدايا قيمة بفاصوليا تصل حتى 10000!</p>
  <p>✔ أول إجابة صحيحة ستحصل على الجائزة</p>
</div>

<!-- العدّ التنازلي -->
<div class="section">
  <h2>⏳ العد التنازلي للمسابقة</h2>
  <div id="countdown">48:00:00</div>
</div>

<!-- التصويت -->
<div class="section">
  <h2>📊 صوت لأفضل فقرة</h2>
  <select id="vote">
    <option>Deja</option>
    <option>Rody</option>
    <option>الشيخه</option>
    <option>ابوعدى</option>
  </select>
  <button class="like-btn">صوت الآن</button>
</div>

<!-- Firebase SDK -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getDatabase, ref, set, get, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAxzeJBrb4NjJgA6qxI7FzZBwaksiLvkVI",
    authDomain: "theeb-monthly.firebaseapp.com",
    projectId: "theeb-monthly",
    storageBucket: "theeb-monthly.appspot.com",
    messagingSenderId: "65722929609",
    appId: "1:65722929609:web:d4e2de7457612372ce1818",
    databaseURL: "https://theeb-monthly-default-rtdb.firebaseio.com"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  const users = ["abuadi", "sheikha", "bakar", "jasmin"];
  users.forEach(user => {
    const el = document.getElementById("like-" + user);
    const refLikes = ref(db, "likes/" + user);
    onValue(refLikes, snap => {
      el.innerText = snap.exists() ? snap.val() : 0;
    });
  });

  window.like = function(user) {
    const refLikes = ref(db, "likes/" + user);
    get(refLikes).then(snap => {
      const count = snap.exists() ? snap.val() : 0;
      set(refLikes, count + 1);
    });
  };

  window.submitAnswer = function() {
    const answer = document.getElementById("answer").value;
    const id = document.getElementById("likeeId").value;
    if (!answer || !id) return alert("يرجى ملء الحقول");
    set(ref(db, "answers/" + id), answer);
    alert("تم إرسال إجابتك بنجاح");
  };

  // الرسالة المنبثقة
  window.onload = () => {
    const popup = document.getElementById("popup");
    popup.style.display = "block";
    setTimeout(() => popup.style.display = "none", 5000);

    // العد التنازلي (48 ساعة)
    const start = localStorage.getItem("startTime") || new Date().getTime();
    localStorage.setItem("startTime", start);
    const countdown = document.getElementById("countdown");
    setInterval(() => {
      const now = new Date().getTime();
      const distance = 48 * 3600 * 1000 - (now - start);
      const h = Math.floor(distance / (1000 * 60 * 60));
      const m = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const s = Math.floor((distance % (1000 * 60)) / 1000);
      countdown.innerText = `${h.toString().padStart(2,0)}:${m.toString().padStart(2,0)}:${s.toString().padStart(2,0)}`;
    }, 1000);
  };
</script>

</body>
</html>
